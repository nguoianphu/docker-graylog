sudo: required

# language: ruby

services:
  - docker

before_install:
  - docker build -t graylog .
  - docker run --name some-mongo -d mongo
  - sleep 10
  - docker run --name some-elasticsearch -d elasticsearch elasticsearch -Des.cluster.name="graylog"
  - sleep 30
  - docker run --link some-mongo:mongo --link some-elasticsearch:elasticsearch -d -p 127.0.0.1:80:9000 graylog

script:
  - curl http://127.0.0.1:80/
